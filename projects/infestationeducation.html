<!DOCTYPE html>
<html lang="en" class="h-full" xmlns:x-transition="http://www.w3.org/1999/xhtml">
<head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Infestation Education - Project Page - Ewan Prangell</title>

    <!-- Primary Meta Tags -->
    <meta name="title" content="Infestation Education - Project Page - Ewan Prangell">
    <meta name="description" content="A collection of my development projects with their wiki pages. Additionally it shows my journey through learning.">
    <meta name="author" content="Ewan Prangell">
    <meta name="keywords" content="web development, programming, developer portfolio">

    <!-- Open Graph / Facebook -->
    <meta property="og:type" content="website">
    <meta property="og:url" content="https://ewanprangell.github.io/projects/infestationeducation">
    <meta property="og:site_name" content="Ewan Prangell">
    <meta property="og:title" content="Infestation Education - Project Page - Ewan Prangell">
    <meta property="og:description" content="A collection of my development projects with their wiki pages. Additionally it shows my journey through learning.">
    <meta property="og:image" content="https://ewanprangell.github.io/assets/site-image.png">
    <meta property="og:image:width" content="1200">
    <meta property="og:image:height" content="630">
    <meta property="og:locale" content="en_US">

    <!-- Twitter -->
    <meta property="twitter:card" content="summary_large_image">
    <meta property="twitter:url" content="https://ewanprangell.github.io/projects/infestationeducation">
    <meta property="twitter:title" content="Infestation Education - Project Page - Ewan Prangell">
    <meta property="twitter:description" content="A collection of my development projects with their wiki pages. Additionally it shows my journey through learning.">
    <meta property="twitter:image" content="https://ewanprangell.github.io/assets/site-image.png">
    <meta property="twitter:creator" content="@PrangellDev">

    <!-- Theme Color for browsers -->
    <meta name="theme-color" content="#EC4899">

    <link rel="stylesheet" href="/css/styles.css" />
    <link rel="stylesheet" href="/css/animations.css" />
    <link rel="stylesheet" href="/css/index.css" />
    <link rel="stylesheet" href="/css/project-page.css" />
    <script nonce="SUIiDKvdAKfAQ83JF6r8WpO/NmruLpbv8ihFYt&#x2B;TqvM=" defer src="https://unpkg.com/alpinejs@3.x.x/dist/cdn.min.js"></script>

    <link rel="icon" href="/assets/prangell-icon.png"/>
</head>
<body class="min-h-full flex flex-col bg-gradient-to-br from-primary-50 to-secondary-50" x-data="projectPage">

<!-- HEADER -->
<header class="bg-white shadow-sm relative">
    <nav class="container mx-auto px-4 py-4 flex justify-between items-center">
        <a href="/index.html" class="text-2xl font-display font-bold hover:opacity-80 transition-all px-2 py-1">Ewan Prangell</a>

        <a b-fjjvsfsfew href="/projects.html"
           class="nav-link group relative flex items-center gap-1 px-2 py-1 rounded-lg transition-all duration-300"
           :class="{ 'nav-link-active': activeSection.includes('projects.html') }"
           aria-label="View all projects">
            <span b-fjjvsfsfew>‚Üê Back to Projects</span>
            <span b-fjjvsfsfew class="absolute inset-x-0 -bottom-1 h-0.5 bg-primary-500 transform origin-left transition-transform scale-x-0 group-hover:scale-x-100" aria-hidden="true"></span>
        </a>
    </nav>
</header>

<main class="container mx-auto px-4 py-12 max-w-5xl">
    <div class="relative bg-white ring-1 ring-gray-900/5 rounded-2xl p-8 shadow-lg">

        <!-- Decorative blob -->
        <div class="absolute inset-0 flex items-center justify-center opacity-10 -z-10">
            <div class="rotating-background blur-xl"></div>
        </div>

        <!-- Title + Summary -->
        <div class="text-center mb-10">
            <h1 class="text-4xl font-bold text-gray-900 mb-3" x-text="project.title"></h1>
            <h2 class="text-2xl font-bold text-gray-700 mb-3" x-text="project.subtitle"></h2>
            <h2 class="text-2x1 font-bold text-gray-700 mb-3" aria-label="Creation Date" x-text="formatDate(project.date)"></h2>
            <div class="small-gap-section"></div>
            <div class="flex flex-wrap gap-2 justify-center mb-4">
                <template x-for="tag in project.tags" :key="tag">
                    <span class="tag" x-text="tag"></span>
                </template>
            </div>
            <p class="text-gray-600 text-lg max-w-2xl mx-auto" x-text="project.summary"></p>
        </div>

        <div class="gap-section"></div>

        <!-- Media Carousel -->
        <div class="relative w-full h-full rounded-xl overflow-hidden shadow-md mb-10">
            <template x-for="(item, index) in project.media" :key="index">
                <div>
                    <img x-show="item.type === 'image' && currentSlide === index" :src="item.src" class="w-full h-full object-cover inset-0 transition-opacity duration-300" />
                    <video
                        x-show="item.type === 'video' && currentSlide === index"
                        :src="item.src"
                        controls
                        class="w-full h-full object-cover inset-0"
                        x-ref="'carouselVideo' + index"
                        x-effect="if (item.type === 'video' && currentSlide === index) { $refs['carouselVideo' + index]?.pause(); $refs['carouselVideo' + index]?.currentTime = 0; }"
                    ></video>
                </div>
            </template>

            <button @click="prev()" class="carousel-btn prev">&lt</button>
            <button @click="next()" class="carousel-btn next">&gt</button>
        </div>

        <div class="gap-section"></div>

        <!-- Links -->
        <div class="mb-10">
            <h2 class="text-2xl font-semibold mb-4">Links</h2>
            <div class="flex flex-wrap gap-3">
                <template x-for="link in project.links">
                    <a :href="link.url" target="_blank" class="px-4 py-2 rounded-xl bg-primary-500 text-white hover:bg-primary-600 transition flex items-center gap-2">
                        <template x-if="link.svg">
                            <span x-html="link.svg" class="inline-block align-middle"></span>
                        </template>
                        <span x-text="link.label"></span>
                    </a>
                </template>
            </div>
        </div>
        
        <div class="gap-section"></div>

        <!-- Full Description -->
        <div class="mb-10">
            <h2 class="text-2xl font-semibold mb-4">The Challange</h2>
            <p class="text-gray-700 leading-relaxed" x-text="project.challenge"></p>
            
            <div class="gap-section"></div>

            <h2 class="text-2xl font-semibold mb-4">Technical Approach</h2>
            <div class="space-y-4 text-gray-700 leading-relaxed">
              <template x-for="(paragraph, i) in technicalApproachParagraphs" :key="i">
                <p x-text="paragraph"></p>
              </template>
            </div>

            <div class="gap-section"></div>

            <h2 class="text-2xl font-semibold mb-4">Impact and Outcomes</h2>
            <div class="space-y-4 text-gray-700 leading-relaxed">
              <template x-for="(paragraph, i) in impactOutcomeParagraphs" :key="i">
                <p x-text="paragraph"></p>
              </template>
            </div>
        </div>

        <!-- Code Example Block -->
        <div class="gap-section"></div>
        <div class="gap-section"></div>
        <h2 class="text-2xl font-semibold mb-4">Code Examples</h2>
        <template x-for="(block, idx) in project.codeBlocks" :key="idx">
            <div class="mb-10">
                <div class="gap-section"></div>
                <div class="flex items-center gap-3 mb-2">
                <span class="text-primary-500 font-bold">Code Block #<span x-text="idx + 1"></span></span>
                <span class="text-gray-600" x-text="block.summary"></span>
                </div>
                <div class="mb-3">
                <span class="block text-gray-700" x-text="block.breakdown"></span>
                </div>
                <div class="gap-section"></div>
                <div class="grid grid-cols-1 md:grid-cols-2 gap-6 items-stretch">
                <!-- Multi-file code block -->
                <template x-if="block.codeFiles">
                    <div class="code-block-overview" x-data="multiFileCodeBlock(block.codeFiles)">
                        <div class="code-block-overlay" @click="dropdownOpen = !dropdownOpen" style="cursor:pointer;position:relative;">
                            <svg class="animate-bounce-code" xmlns="http://www.w3.org/2000/svg" width="18" height="18" fill="none" viewBox="0 0 24 24" style="vertical-align:middle;"><path stroke="#fff" stroke-width="2" d="M6 9l6 6 6-6"/></svg>
                            <span x-text="selected"></span>
                            <div x-show="dropdownOpen" @click.outside="dropdownOpen = false" style="position:absolute;top:2.2rem;left:0;z-index:10;background:#18181b;border-radius:0.5rem;box-shadow:0 2px 8px rgba(0,0,0,0.15);min-width:180px;">
                                <template x-for="fileObj in block.codeFiles" :key="fileObj.file">
                                    <div @click.stop="selected = fileObj.file; dropdownOpen = false" style="padding:0.5rem 1rem;color:#fff;cursor:pointer;white-space:nowrap;" :class="{'bg-gray-700': selected === fileObj.file}">
                                        <span x-text="fileObj.label"></span>
                                    </div>
                                </template>
                            </div>
                        </div>
                        <pre class="code-block-content" style="margin-top:0;"><code x-text="code"></code></pre>
                    </div>
                </template>
                <!-- Single file code block -->
                <template x-if="!block.codeFiles && block.file">
                    <div class="code-block-overview" x-data="codeBlockLoader(block.file)">
                    <div class="code-block-overlay">
                        <svg xmlns='http://www.w3.org/2000/svg' width='18' height='18' fill='none' viewBox='0 0 24 24'><rect width='24' height='24' rx='4' fill='#334155'/><path stroke='#fff' stroke-width='2' d='M7 7h10v10H7z'/></svg>
                        <span x-text="block.file"></span>
                    </div>
                    <pre class="code-block-content"><code x-text="code"></code></pre>
                    </div>
                </template>
                <!-- Inline code block -->
                <template x-if="!block.codeFiles && !block.file">
                    <div class="code-block-overview">
                    <div class="code-block-overlay">
                        <svg xmlns='http://www.w3.org/2000/svg' width='18' height='18' fill='none' viewBox='0 0 24 24'><rect width='24' height='24' rx='4' fill='#334155'/><path stroke='#fff' stroke-width='2' d='M7 7h10v10H7z'/></svg>
                        <span>Inline Code</span>
                    </div>
                    <pre class="code-block-content"><code x-text="block.code"></code></pre>
                    </div>
                </template>
                <!-- Optional image/media -->
                <template x-if="block.media">
                    <div class="h-full">
                    <img :src="block.media" class="rounded-xl shadow w-full object-fit:cover; object-cover" />
                    </div>
                </template>
                </div>
                <div class="mb-3">
                  <div class="gap-section"></div>
                  <h2 class="text-2xl font-semibold mb-4">Key Decisions</h2>
                  <span class="block text-gray-700" x-text="block.keyDecisions"></span>
                </div>
                <div class="mb-3">
                  <div class="gap-section"></div>
                  <h2 class="text-2xl font-semibold mb-4">What I Learned</h2>
                  <span class="block text-gray-700" x-text="block.whatILearned"></span>
                </div>
            </div>
        </template>

        <div class="gap-section"></div>
        <div class="gap-section"></div>

        <!-- Additional Media Grid -->
        <div>
            <h2 class="text-2xl font-semibold mb-4">Additional Media</h2>
            <div class="grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-4">
                <template x-for="(item, index) in project.addmedia">
                    <div>
                        <template x-if="item.type === 'image'">
                            <img :src="item.src" class="rounded-xl object-cover w-full h-64 shadow" />
                        </template>
                        <template x-if="item.type === 'video'">
                            <video :src="item.src" controls class="rounded-xl w-full h-64 object-cover shadow"></video>
                        </template>
                    </div>
                </template>
            </div>
        </div>

    </div>
</main>

<footer b-fjjvsfsfew class="bg-white border-t mt-8">
    <div b-fjjvsfsfew class="container mx-auto px-4 py-6">
      <div b-fjjvsfsfew class="text-center space-y-2">
        <p b-fjjvsfsfew class="text-gray-600">&copy; 2025 - Ewan Prangell</p>
        <div class="flex justify-center space-x-6 mt-4">
          <a href="https://github.com/PrangellPlays/" class="group flex flex-col items-center p-2 hover:transform hover:scale-110 transition-all" target="_blank" rel="noopener noreferrer">
            <span class="text-xl animate-bounce-slower">
              <svg xmlns="http://www.w3.org/2000/svg" width="28" height="28" fill="currentColor" class="bi bi-github" viewBox="0 0 16 16"><path d="M8 0C3.58 0 0 3.58 0 8c0 3.54 2.29 6.53 5.47 7.59.4.07.55-.17.55-.38 0-.19-.01-.82-.01-1.49-2.01.37-2.53-.49-2.69-.94-.09-.23-.48-.94-.82-1.13-.28-.15-.68-.52-.01-.53.63-.01 1.08.58 1.23.82.72 1.21 1.87.87 2.33.66.07-.52.28-.87.51-1.07-1.78-.2-3.64-.89-3.64-3.95 0-.87.31-1.59.82-2.15-.08-.2-.36-1.02.08-2.12 0 0 .67-.21 2.2.82.64-.18 1.32-.27 2-.27s1.36.09 2 .27c1.53-1.04 2.2-.82 2.2-.82.44 1.1.16 1.92.08 2.12.51.56.82 1.27.82 2.15 0 3.07-1.87 3.75-3.65 3.95.29.25.54.73.54 1.48 0 1.07-.01 1.93-.01 2.2 0 .21.15.46.55.38A8.01 8.01 0 0 0 16 8c0-4.42-3.58-8-8-8"/></svg>
            </span>
            <span class="mt-1 text-sm">GitHub</span>
            <span b-fjjvsfsfew class="absolute inset-x-0 -bottom-1 h-0.5 bg-black-500 transform origin-left transition-transform scale-x-0 group-hover:scale-x-100" aria-hidden="true"></span>
          </a>
          <a href="https://www.linkedin.com/in/ewanprangell/" class="group flex flex-col items-center p-2 hover:transform hover:scale-110 transition-all" target="_blank" rel="noopener noreferrer">
            <span class="text-xl animate-bounce-slower">
              <svg xmlns="http://www.w3.org/2000/svg" width="28" height="28" fill="currentColor" class="bi bi-linkedin" viewBox="0 0 16 16"><path d="M0 1.146C0 .513.526 0 1.175 0h13.65C15.474 0 16 .513 16 1.146v13.708c0 .633-.526 1.146-1.175 1.146H1.175C.526 16 0 15.487 0 14.854zm4.943 12.248V6.169H2.542v7.225zm-1.2-8.212c.837 0 1.358-.554 1.358-1.248-.015-.709-.52-1.248-1.342-1.248S2.4 3.226 2.4 3.934c0 .694.521 1.248 1.327 1.248zm4.908 8.212V9.359c0-.216.016-.432.08-.586.173-.431.568-.878 1.232-.878.869 0 1.216.662 1.216 1.634v3.865h2.401V9.25c0-2.22-1.184-3.252-2.764-3.252-1.274 0-1.845.7-2.165 1.193v.025h-.016l.016-.025V6.169h-2.4c.03.678 0 7.225 0 7.225z"/></svg>
            </span>
            <span class="mt-1 text-sm">LinkedIn</span>
            <span b-fjjvsfsfew class="absolute inset-x-0 -bottom-1 h-0.5 bg-black-500 transform origin-left transition-transform scale-x-0 group-hover:scale-x-100" aria-hidden="true"></span>
          </a>
          <a href="#" id="contact-trigger" class="group flex flex-col items-center p-2 hover:transform hover:scale-110 transition-all" target="_blank" rel="noopener noreferrer">
            <span class="text-xl animate-bounce-slower">
              <svg xmlns="http://www.w3.org/2000/svg" width="28" height="28" viewBox="0 -960 960 960"><path d="M280-280q-33 0-56.5-23.5T200-360v-400q0-33 23.5-56.5T280-840h560q33 0 56.5 23.5T920-760v400q0 33-23.5 56.5T840-280zm280-188L280-663v303h560v-303zm0-98 280-194H280zM120-120q-33 0-56.5-23.5T40-200v-500h80v500h660v80zm720-546v-94H280v94-94h560z"/></svg>
            </span>
            <span class="mt-1 text-sm">Email</span>
            <span b-fjjvsfsfew class="absolute inset-x-0 -bottom-1 h-0.5 bg-black-500 transform origin-left transition-transform scale-x-0 group-hover:scale-x-100" aria-hidden="true"></span>
          </a>
        </div>
      </div>
    </div>
  </footer>

<script>
    document.addEventListener('alpine:init', () => {
        Alpine.data('projectPage', () => ({
            currentSlide: 0,
            project: {
                title: "Infestation Education",
                subtitle: "Unity Survival-Dystopian Game",
                date: "2025-11-18T14:06:13.0074506",
                summary: "A dystopian narrative-driven title released on itch.io.",
                challenge: "This project raised a unique set of challenges, primarily around working in a large team of 13 members across various disciplines including design, narrative, art, and programming. Ensuring cohesive integration of gameplay mechanics with the story and art style required effective communication and collaboration. Additionally, desiging complex systems such as inventory management, combat mechanics, and event-driven UI for Unity presented technical hurdles that demanded careful planning and modular coding practices to facilitate teamwork and future scalability. Due to not being the primary programmer and instead being the lead documenter and game mechanics designer, balancing my time between coding tasks and documentation was a significant challenge.",
                technicalApproach: "To complete this project, I adopted a modular programming approach using C# within the Unity engine. This involved breaking down gameplay mechanics into discrete, manageable components that could be developed and tested independently before integration. I utilized Unity's event system to implement a coroutine-based logic for an asynchronous task on the loading screen for a character image carousel. Regular meetings with the design and narrative teams ensured that technical implementations aligned with the overall vision of the game. Additionally, I focused on writing clear technical documentation to support future development and maintenance of the project.\n\nKey technical strategies included:\n\n1. Modular Design: Creating reusable scripts for common functionalities such as inventory management and UI handling.\n\n2. Event-Driven Programming: Leveraging Unity's event system to decouple components and facilitate communication between different game systems.\n\n3. Coroutine Usage: Implementing coroutines for non-blocking operations, enhancing user experience during loading sequences.\n\n4. Documentation: Maintaining comprehensive documentation to aid team members in understanding the codebase and facilitate onboarding of new developers.\n\nThese approaches not only streamlined the development process but also ensured that the game mechanics were robust and adaptable to future changes.",
                impactOutcome: "This was my first experience working on a large-scale game project within a team setting, which significantly enhanced my collaboration and communication skills. The modular system I developed contributed to a more efficient workflow for the lead programmer, allowing for easier debugging and feature additions. The project culminated in a playable build released on itch.io, receiving positive feedback for its engaging mechanics and narrative integration. Furthermore, the comprehensive documentation I produced has served as a valuable resource for the team, facilitating onboarding of new members and guiding future development efforts. Overall, this project not only expanded my technical skills in Unity and C# but also provided invaluable experience in team dynamics and project management within a game development context.",
                tags: ["Unity", "Game", "C#"],
                media: [
                    { type: "image", src: "/assets/projects/infestatione/main_menu.png" },
                    { type: "image", src: "/assets/projects/infestatione/main_building_map.png" },
                    { type: "video", src: "/assets/projects/infestatione/main_menu_showcase.mp4" }
                ],
                links: [
                    {
                        svg: `<svg width="24" height="24" viewBox="0 0 16 16" xmlns="http://www.w3.org/2000/svg" fill="currentColor"><path fill-rule="evenodd" clip-rule="evenodd" d="M8.5 1a6.5 6.5 0 1 1 0 13 6.5 6.5 0 0 1 0-13zm4.894 4a5.527 5.527 0 0 0-3.053-2.676c.444.84.765 1.74.953 2.676h2.1zm.582 2.995A5.11 5.11 0 0 0 14 7.5a5.464 5.464 0 0 0-.213-1.5h-2.342c.032.331.055.664.055 1a10.114 10.114 0 0 1-.206 2h2.493c.095-.329.158-.665.19-1.005zm-3.535 0l.006-.051A9.04 9.04 0 0 0 10.5 7a8.994 8.994 0 0 0-.076-1H6.576A8.82 8.82 0 0 0 6.5 7a8.98 8.98 0 0 0 .233 2h3.534c.077-.332.135-.667.174-1.005zM10.249 5a8.974 8.974 0 0 0-1.255-2.97C8.83 2.016 8.666 2 8.5 2a3.62 3.62 0 0 0-.312.015l-.182.015L8 2.04A8.97 8.97 0 0 0 6.751 5h3.498zM5.706 5a9.959 9.959 0 0 1 .966-2.681A5.527 5.527 0 0 0 3.606 5h2.1zM3.213 6A5.48 5.48 0 0 0 3 7.5 5.48 5.48 0 0 0 3.213 9h2.493A10.016 10.016 0 0 1 5.5 7c0-.336.023-.669.055-1H3.213zm2.754 4h-2.36a5.515 5.515 0 0 0 3.819 2.893A10.023 10.023 0 0 1 5.967 10zM8.5 12.644A8.942 8.942 0 0 0 9.978 10H7.022A8.943 8.943 0 0 0 8.5 12.644zM11.033 10a10.024 10.024 0 0 1-1.459 2.893A5.517 5.517 0 0 0 13.393 10h-2.36z"/></svg>`,
                        label: "Live Site",
                        url: "https://northkentcollegegames.itch.io/infestationeducation"
                    }
                ],
                codeBlocks: [
                        {
                            file: "/assets/code/infestatione/image/ImageSlideshowBehaviour.cs",
                            summary: "A simple image carousel script for a main menu.",
                            breakdown: "This script handles the logic for an image slideshow in the main menu of the game. It uses Unity's coroutine system to cycle through a list of images, displaying each one for a set duration before transitioning to the next. The script ensures that the slideshow loops indefinitely and provides a smooth user experience during loading screens. It also includes error handling to manage cases where the image list is empty. This implementation demonstrates effective use of Unity's MonoBehaviour lifecycle methods and coroutine functionality to create an engaging visual element for the game's user interface.",
                            keyDecisions: "To develop this system, I chose to utilize Unity's coroutine feature for its ability to handle asynchronous operations without blocking the main thread. This decision was crucial for maintaining a smooth user experience during loading screens. I also opted for a modular design, encapsulating the slideshow logic within its own MonoBehaviour script, which allows for easy reuse and modification in other parts of the project. Additionally, I implemented error handling to ensure robustness, particularly in scenarios where the image list might be empty, preventing potential runtime errors. These decisions collectively contributed to a reliable and visually appealing slideshow system that enhances the overall user interface of the game.",
                            whatILearned: "Through direct contribution to the game's codebase, I gained practical experience in Unity's scripting environment and deepened my understanding of C# programming. I learned how to effectively use coroutines for managing timed events, which is essential for creating dynamic and responsive game features. Additionally, I improved my skills in debugging and optimizing code within a collaborative team setting, which is invaluable for any game development project. This experience also highlighted the importance of clear documentation and modular design, as these practices facilitate teamwork and future maintenance of the codebase.",
                            media: "/assets/projects/infestatione/main_menu_showcase.gif"
                        }
                ],
                addmedia: [
                    { type: "image", src: "/assets/projects/infestatione/main_menu.png" },
                    { type: "image", src: "/assets/projects/infestatione/main_building_map.png" },
                    { type: "video", src: "/assets/projects/infestatione/main_menu_showcase.mp4" }
                ],
            },
            next() {
                this.currentSlide = (this.currentSlide + 1) % this.project.media.length;
            },
            prev() {
                this.currentSlide = (this.currentSlide - 1 + this.project.media.length) % this.project.media.length;
            },

            formatDate(dateString) {
              const date = new Date(dateString);
              return date.toLocaleDateString('en-GB', { year: 'numeric', month: 'long', day: 'numeric' });
            },

            get technicalApproachParagraphs() {
              return this.project.technicalApproach.split(/\n\s*\n/);
            },
            get impactOutcomeParagraphs() {
              return this.project.impactOutcome.split(/\n\s*\n/);
            }
        })),
        Alpine.data('codeBlockLoader', (file) => ({
        code: '',
        async init() {
            if (file) {
                try {
                    const res = await fetch(file);
                    this.code = await res.text();
                } catch (e) {
                    this.code = '// Error loading file';
                }
            }
        }
    })),
    Alpine.data('multiFileCodeBlock', (files) => ({
        selected: files[0]?.file,
        code: '',
        dropdownOpen: false,
        async fetchCode() {
            if (this.selected) {
                try {
                    const res = await fetch(this.selected);
                    this.code = await res.text();
                } catch (e) {
                    this.code = '// Error loading file';
                }
            }
        },
        init() {
            this.fetchCode();
            this.$watch('selected', () => {
                this.fetchCode();
            });
        }
    }));
    });
</script>
<script>
    // Embed pop-out handlers: lazy-load the itch.io embed iframe when opened
    document.addEventListener('DOMContentLoaded', function() {
        const trigger = document.getElementById('embed-trigger');
        const overlay = document.getElementById('embed-overlay');
        const frame = document.getElementById('embed-frame');
        const closeBtn = document.getElementById('close-embed');
        const itchUrl = 'https://northkentcollegegames.itch.io/infestationeducation/embed';

        const fallback = document.getElementById('embed-fallback');
        const fallbackClose = document.getElementById('fallback-close');

        let loadTimer = null;

        // Defensive cleanup: ensure embed overlay starts closed
        if (overlay) {
            overlay.style.opacity = '0';
            overlay.style.pointerEvents = 'none';
        }
        if (fallback) fallback.style.display = 'none';

        // Preload the embed by opening and immediately closing on page load
        if (frame && !frame.getAttribute('src')) {
            frame.setAttribute('src', 'https://northkentcollegegames.itch.io/infestationeducation/embed');
        }

        if (trigger && overlay && frame) {
            trigger.addEventListener('click', function (e) {
                e.preventDefault();
                // set iframe src the first time to avoid unnecessary loads
                if (!frame.getAttribute('src')) {
                    frame.setAttribute('src', itchUrl);
                }

                // show overlay
                overlay.style.opacity = '1';
                overlay.style.pointerEvents = 'all';
                document.documentElement.style.overflow = 'hidden';
                document.body.style.overflow = 'hidden';

                // show fallback immediately (game currently not accessible)
                if (fallback) fallback.style.display = 'flex';

                // clear timer when iframe loads
                frame.onload = function() {
                    if (loadTimer) { clearTimeout(loadTimer); loadTimer = null; }
                    if (fallback) fallback.style.display = 'none';
                };
            });
        }

        function closeEmbed() {
            if (!overlay) return;
            overlay.style.opacity = '0';
            overlay.style.pointerEvents = 'none';
            // don't clear src to keep quick reopen; uncomment to free memory
            // frame.setAttribute('src', '');
            if (loadTimer) { clearTimeout(loadTimer); loadTimer = null; }
            if (fallback) fallback.style.display = 'none';
            document.documentElement.style.overflow = '';
            document.body.style.overflow = '';
        }

        if (closeBtn) closeBtn.addEventListener('click', closeEmbed);
        if (overlay) overlay.addEventListener('click', function(e) { if (e.target === overlay) closeEmbed(); });
        document.addEventListener('keydown', function(e) { if (e.key === 'Escape') closeEmbed(); });

        if (fallbackClose) fallbackClose.addEventListener('click', closeEmbed);
    });
</script>

<style>
    /* Background overlay */
    #contact-overlay {
      position: fixed;
      left: 0;
      top: 0;
      width: 100%;
      height: 100%;
      background: rgba(3,6,23,0.45);
      backdrop-filter: blur(4px) brightness(0.9);
      display: flex;
      justify-content: center;
      align-items: center;
      opacity: 0;
      pointer-events: none;
      transition: opacity .25s ease;
      z-index: 9999;
    }

    /* Contact box (styled to match page) */
    #contact-box {
      background: linear-gradient(180deg, rgba(255,255,255,0.98), rgba(250,247,255,0.95));
      padding: 22px 24px;
      border-radius: 14px;
      width: 92%;
      max-width: 520px;
      transform: translateY(36px);
      transition: transform .3s cubic-bezier(.2,.9,.2,1), box-shadow .2s ease;
      box-shadow: 0 18px 60px rgba(12,18,40,0.35);
      border: 1px solid rgba(109,74,255,0.06);
    }

    /* Active state */
    #contact-overlay.active {
      opacity: 1;
      pointer-events: all;
    }

    #contact-overlay.active #contact-box {
      transform: translateY(0);
    }

    #contact-box h2 {
      margin-top: 0;
      margin-bottom: 8px;
      font-size: 1.4rem;
      color: #231942;
    }

    #contact-box label {
      display: block;
      margin-bottom: 6px;
      font-weight: 600;
      color: #4b4b60;
      font-size: 0.95rem;
    }

    #contact-box input, #contact-box textarea {
      width: 100%;
      padding: 12px 14px;
      border: 1px solid rgba(16,24,40,0.08);
      background: #fff;
      border-radius: 10px;
      margin-bottom: 12px;
      box-shadow: inset 0 1px 0 rgba(255,255,255,0.7);
      transition: box-shadow .12s ease, border-color .12s ease, transform .08s ease;
      font-size: 0.95rem;
      color: #111827;
    }

    #contact-box input:focus, #contact-box textarea:focus {
      outline: none;
      border-color: rgba(109,74,255,0.9);
      box-shadow: 0 6px 22px rgba(109,74,255,0.08), 0 0 0 4px rgba(109,74,255,0.06);
      transform: translateY(-1px);
    }

    .btn-row {
      display: flex;
      gap: 12px;
      justify-content: flex-end;
      margin-top: 6px;
    }

    /* Primary send button inside contact box */
    #contact-box button[type="submit"] {
      padding: 10px 16px;
      border: none;
      background: linear-gradient(90deg,#6d4aff 0%, #8366ff 100%);
      color: white;
      border-radius: 10px;
      cursor: pointer;
      font-weight: 700;
      box-shadow: 0 10px 30px rgba(109,74,255,0.18);
      transition: transform .12s ease, box-shadow .12s ease, opacity .12s ease;
    }
    #contact-box button[type="submit"]:hover { transform: translateY(-2px); box-shadow: 0 18px 36px rgba(109,74,255,0.22); }
    #contact-box button[type="submit"]:active { transform: translateY(0); }

    /* Secondary cancel button */
    #close-contact {
      padding: 10px 14px;
      background: transparent;
      color: #6b6b7d;
      border-radius: 10px;
      border: 1px solid rgba(16,24,40,0.06);
      cursor: pointer;
    }
  </style>

  <div id="contact-overlay">
    <form id="contact-box" action="https://formspree.io/f/mblvgkrn" method="POST">
      <h2>Contact Me</h2>
      <label>Your Name</label>
      <input type="text" name="name" id="contact-name" placeholder="Enter your name" required>
      <label>Your Email</label>
      <input type="email" name="email" id="contact-email" placeholder="Enter your email" required>
      <label>Your Message</label>
      <textarea name="message" id="contact-message" placeholder="Write your message..." required></textarea>
      <div class="btn-row">
        <button type="submit">Send</button>
        <button type="button" id="close-contact">Cancel</button>
      </div>
    </form>
  </div>

  <script>
    // Contact form functionality
    document.getElementById("contact-trigger").addEventListener("click", function(e) {
      e.preventDefault();
      document.getElementById("contact-overlay").classList.add("active");
    });

    document.getElementById("close-contact").addEventListener("click", function() {
      document.getElementById("contact-overlay").classList.remove("active");
    });

    // OPTIONAL: Show success message without redirecting
    document.getElementById("contact-box").addEventListener("submit", async function(e) {
      e.preventDefault(); // Stop default redirect

      const form = e.target;

      const response = await fetch(form.action, {
        method: "POST",
        body: new FormData(form),
        headers: { "Accept": "application/json" }
      });

      if (response.ok) {
        alert("Message sent successfully!");
        form.reset();
        document.getElementById("contact-overlay").classList.remove("active");
      } else {
        alert("There was an error sending your message.");
      }
    });
  </script>
</body>
</html>